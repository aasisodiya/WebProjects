<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Basic Meta Tags Start -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="author" content="Akash Sisodiya" />
    <meta name="description" content="Basic Demonstration of Google API Integration" />
    <!-- Basic Meta Tags End -->
    <!-- The Open Graph Protocol Tags Start -->
    <meta property="og:url" content="https://github.com/aasisodiya" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Google API Integration Example" />
    <meta property="og:description" content="Basic Demonstration of Google API Integration" />
    <meta property="og:image" content="https://aasisodiya.github.io/WebProjects/shared/img/github.png" />
    <!-- <meta name="google-signin-client_id" content="1082261110790-22r7b64q9s42cqk1tsh2hokphamfsstd.apps.googleusercontent.com"> -->
    <!-- The Open Graph Protocol Tags End -->
    <!-- Title and Icon of the Website -->
    <title>Google API Integration Example</title>
    <link rel="icon" href="img/favicon.png" type="image/x-icon" />
    <!-- Title and Icon of the Website -->
    <!-- Google Font Import Start -->
    <link href="https://fonts.googleapis.com/css?family=Exo+2|Raleway" rel="stylesheet" />
    <!-- Google Font Import End -->
    <!-- Google Platform Library -->
    <style>
        /* Template Code Start */

        .footer {
            position: fixed;
            bottom: 5px;
            left: 5px;
            font-weight: bold;
        }

        .footer>a {
            text-decoration: none;
            color: orange;
        }

        .footer>img {
            top: 0.25rem;
            position: relative;
        }

        * {
            font-family: "Exo 2", sans-serif;
            /* CSS Code to handle unwanted element highlights / div selection in Android */
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Template Code End */
    </style>
</head>

<body ontouchend>

    <div id="signIn"></div>
    <div class="profile">
        <div id="username"></div>
        <img src="" alt="" id="picture">
    </div>

    <!-- required script -->
    <script src="https://accounts.google.com/gsi/client"></script>
    <script>
        function parseJwt(token) {
            var base64Url = token.split('.')[1];
            var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));

            return JSON.parse(jsonPayload);
        };

        function handleCallback(response) {
            console.log(response);
            let token = response.credential;
            console.log(token);
            let data = parseJwt(token);
            console.log(data);
            document.getElementById("username").innerText = data.name;
            document.getElementById("picture").src = data.picture;
            document.getElementById("signIn").style.display = "none";
        }
        const client = google.accounts.id.initialize({
            client_id: '1082261110790-22r7b64q9s42cqk1tsh2hokphamfsstd.apps.googleusercontent.com',
            scope: '',
            callback: handleCallback,
        });
        console.log(client);
        google.accounts.id.prompt();
        google.accounts.id.renderButton(
            document.getElementById("signIn"), {
                theme: "outline",
                size: "large"
            }
        );
    </script>
    <!-- Below code is for footer -->
    <div class="footer">
        &lt;/&gt; by
        <a href="https://github.com/aasisodiya" class="github">aasisodiya</a> |
        <!-- <img src="https://visitor-badge.glitch.me/badge?page_id=aasisodiya.webprojects.template" alt=""> -->
    </div>
</body>

</html>